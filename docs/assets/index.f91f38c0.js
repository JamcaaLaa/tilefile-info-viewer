var l=Object.defineProperty;var d=(i,e,t)=>e in i?l(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var a=(i,e,t)=>(d(i,typeof e!="symbol"?e+"":e,t),t);const _=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};_();class g{constructor(e,t={}){a(this,"_buffer");a(this,"_view");a(this,"_currentOffset",0);a(this,"_littleEndian");this._littleEndian=t.littleEndian===void 0?!0:t.littleEndian,this._buffer=e,this._view=new DataView(e)}get currentOffset(){return this._currentOffset}get canGet(){return this._currentOffset<=this._buffer.byteLength}validate(){if(!this.canGet)throw new Error("\u7D22\u5F15\u8D8A\u754C, \u8BF7\u91CD\u65B0\u8BFB\u53D6\u6570\u636E")}reset(e=0){this._currentOffset=e}reInit(e){this._buffer=e,this._view=new DataView(e),this._currentOffset=0}readByte(){const e=this._view.getUint8(this._currentOffset);return this._currentOffset++,e}readChar(){const e=this.readByte();return String.fromCharCode(e)}readChars(e){if(this.currentOffset+e>this._buffer.byteLength)return"";const t=[];for(let n=0;n<e;n++)t.push(this.readChar());return t.join("")}readUint8(){return this.readByte()}readUint16(){const e=this._view.getUint16(this._currentOffset,this._littleEndian);return this._currentOffset+=2,e}readUint32(){const e=this._view.getUint32(this._currentOffset,this._littleEndian);return this._currentOffset+=4,e}readFloat32(){const e=this._view.getFloat32(this._currentOffset,this._littleEndian);return this._currentOffset+=4,e}readFloat64(){const e=this._view.getFloat64(this._currentOffset,this._littleEndian);return this._currentOffset+=8,e}readInt8(){const e=this._view.getInt8(this._currentOffset);return this._currentOffset++,e}readInt16(){const e=this._view.getInt16(this._currentOffset,this._littleEndian);return this._currentOffset+=2,e}readInt32(){const e=this._view.getInt32(this._currentOffset,this._littleEndian);return this._currentOffset+=4,e}}const y=Object.freeze({magic:"4c",version:"u32",byteLength:"u32",featureTableJSONByteLength:"u32",featureTableBinaryByteLength:"u32",batchTableJSONByteLength:"u32",batchTableBinaryByteLength:"u32"});Object.freeze({magic:"4c",version:"u32",byteLength:"u32",featureTableJSONByteLength:"u32",featureTableBinaryByteLength:"u32",batchTableJSONByteLength:"u32",batchTableBinaryByteLength:"u32",gltfFormat:"u32"});Object.freeze({magic:"4c",version:"u32",byteLength:"u32",featureTableJSONByteLength:"u32",featureTableBinaryByteLength:"u32",batchTableJSONByteLength:"u32",batchTableBinaryByteLength:"u32"});Object.freeze({magic:"4c",version:"u32",byteLength:"u32"});Object.freeze({magic:"4c",version:"u32",byteLength:"u32",tilesLength:"u32"});const c=/(\d+)c/,f=/(i|u)(8|16|32)/,h=/(f)(32|64)/;class b{constructor(e,t){a(this,"_reader");a(this,"_layout");this._layout=t,this._reader=e}get layout(){return this._layout}set layout(e){this._layout=e}readHead(){const e=Object.entries(this._layout),t=[];for(const[n,r]of e)t.push([n,this.selectReadFunctionAndRead(r)]);return Object.fromEntries(t)}selectReadFunctionAndRead(e){if(c.test(e)){const t=e.match(c);if(t){const n=+t[1];return this._reader.readChars(n)}else return""}else if(f.test(e)){const t=e.match(f);if(t){const n=t[1],r=+t[2];return n==="u"?r===8?this._reader.readUint8():r===16?this._reader.readUint16():r===32?this._reader.readUint32():0:r===8?this._reader.readInt8():r===16?this._reader.readInt16():r===32?this._reader.readInt32():0}else return 0}else if(h.test(e)){const t=e.match(h);if(t){const n=+t[2];return n===32?this._reader.readFloat32():n===64?this._reader.readFloat64():0}else return""}else return""}}const o=document.querySelector("#app"),O=async()=>{const i=await fetch("./osgb.b3dm").then(s=>s.arrayBuffer()),e=new g(i),n=new b(e,y).readHead(),r=JSON.stringify(n,null,2);o&&(o.innerHTML=`<pre>
${r}
</pre>`)};O();
//# sourceMappingURL=index.f91f38c0.js.map
